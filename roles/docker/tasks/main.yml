- name: Shorewall to be stopped
  service:
    name: shorewall
    state: stopped

- name: Docker images
  docker_service:
    project_name: fragugliaserver
    pull: yes
    restarted: yes
    definition:
      version: '3.6'
      services:
        sickrage:
          container_name: sickrage
          image: linuxserver/sickrage:latest
          volumes:
            - /home/server0/configuration/SickRage:/config
            - /home/server0/temp/t_downloads/complete:/downloads
            - /home/server0/data/tvshows:/tv
          environment:
            - PGID=20000
            - PUID=20000
            - TZ=Europe/Paris
          network_mode: "host"
        transmission:
          container_name: transmission
          image: linuxserver/transmission:latest
          volumes:
            - /home/server0/configuration/Transmission:/config
            - /home/server0/temp/t_downloads:/downloads
          environment:
            - PGID=20000
            - PUID=20000
            - TZ=Europe/Paris
          network_mode: "host"
        plex:
          container_name: plex
          image: linuxserver/plex:latest
          volumes:
            - /home/server0/configuration/Plex:/config
            - /home/server0/data/tvshows:/data/tvshows
            - /home/server0/data/movies:/data/movies
            - /home/server0/temp/p_transcode:/transcode
          environment:
            - PGID=20000
            - PUID=20000
            - TZ=Europe/Paris
            - VERSION=latest
          network_mode: "host"
        jenkins:
          container_name: jenkins
          image: 'jenkins/jenkins:latest'
          network_mode: "host"
          volumes:
            - '/home/server0/configuration/Jenkins:/var/jenkins_home'
          user: "20000"
          environment:
            - JENKINS_OPTS=--httpListenAddress=127.0.0.1
- file:
    path: /home/server0
    owner: server0
    group: server0
    recurse: yes
    state: directory
